solved asp net identity 2 throws “entity type identity user login has no key defined” and friends i just got double tricked by an aspnet website error but if you are seeing this error along with a couple more similar ones then i can help to make them go away…problemi loaded up a sideproject that i had been working on and when i tried to run it the login screen displayed fine but then when i attempted to log in the following exception was thrown exception details system data entity model configuration model validation exception one or more validation errors were detected during model generation brayford numbers portal models identity user login  entity type identity user login has no key defined define the key for this entity type brayford numbers portal models identity user role  entity type identity user role has no key defined define the key for this entity type identity user logins entity type entity set identity user logins is based on type identity user login that has no keys defined identity user roles entity type entity set identity user roles is based on type identity user role that has no keys defined the reason i got double tricked was because i went to the online version of the site and tested the login there but still got an error screen this is a cautionary tale of not jumping to conclusions because i was then sent off down the rabbit hole wondering how the hell the site could have broken with the same error without me making any changes to the live version because i had custom errors turned on i just saw the error screen and assumed that the local and remote sites were experiencing the same issue that was the jumped to conclusion solutionafter some digging i came across a codeplex issue report that jogged my memory as to what the real issue was if you try to add some extra ef configuration by overriding on model creating then you will see this issue to solve it you need to be sure to call the base on model creating after your setup or perhaps before if this doesn’t work – i’m not sure if it makes a difference either way my site is based on the asp net identity sample currently an alpha1 pre release nuget package so in my case it is in a file called modelsidentity modelscs but it could be in any class you have added it to so just do a search for on model creating and you should find the offending method12345678protected override void on model creating db model builder model builder  some custom setup code added by yourself – this bit could be anythingmodel builder entitycourse  has required t  t department with many t  t courses has foreign key d  d department id will cascade on delete  false  the all important base class call add this line to make your problems go awaybase  on model creating model builderi quick recompile and this exception will be in your past unfortunately for myself i then realised that it was now dec month 12 and the online site exception hidden behind the custom errors was actually the result of me incorrectly adding  1 onto todaymonth this will be the subject of the next post once i solve the issue…rtp harry thursday 11 december 2014 2148 labels article  asp net identity  entity framework email this blog this share to twitter share to facebook share to pinterest