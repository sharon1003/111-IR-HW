how to recover photos and data from a keylocked android phone may 18 th 2014recently a good friend of mine passed away suddenly her family asked me to recover her photos and videos from her computer and android phone the computer was easy enough but the android phone posed a real problem it had a keylock enabled and usb debugging disabled there was no external sd card to pull out which meant that all the photos were stored on the internal memory the phone was a totally stock samsung galaxy s3 mini with a lot of reading i worked out a way to get a data dump from her phone without having to bypass the keylock1 get clockworkmod recovery clockworkmod recovery is a familiar tool to anyone who has ever rooted their android phone or installed a custom rom i run my own phone on cyanogenmod so i knew the broad strokes of how to install and use it if you haven’t done this before your android device actually has several partitions on it for various kinds of data your device actually has several different boot “modes” which are activated by various key combinations on startup one of the boot modes “recovery” is specifically there to allow critical system access and maintenance this is where clockworkmod lives download the clockworkmod rom for your device use the “touch recovery” version if your touchscreen is working since it’s the easiest to use2 get a tool to flash your device there are many tools out there to help you flash various partitions on your device samsung devices are built for a tool called odin which was leaked from the company some time ago unfortunately odin is windowsonly and not all that stable… but there is a great crossplatform open source alternative called heimdall get heimdall at least and optionally jodin3 heimdall has an awesome command line interface and a decent gui if you’re brave and know what you’re talking about i found it much easier to understand by using the java based aka multiplatform frontend jodin3 even though in the end i couldn’t get jodin3 to do the job for me its interface was intuitive enough that i could then understand what was going on from the command line so all you really need here is heimdall or the equivalent for your device but a gui can be nice3 get clockworkmod onto your device note the instructions in this section only apply to samsung devices a simple google search will find appropriate instructions for other devices get into download mode in order for heimdalljodin3odinwhatever to connect to your device it has to be in “download” mode sometimes called “odin” mode google will help you find instructions for your specific device but for the samsung galaxy s3 mini i had to do the following power off you can do this even when the keypad is locked just by holding down the power button for long enough press and hold the power volume down and home keys simultaneously until the phone starts and a warning screen appears pay attention to the warning screen and press volume up when you are ready to continue a phone in download mode looks kinda scary there’s not much on the screen but it does explain quite clearly that it is in download mode or odin mode and that the current firmware is the stock firmware now plug the device into your computer via usb and make sure heimdall can see it by running this on the computer1sudo heimdall detect note i’m not sure that you really need sudo for these operations but might as wellfigure out which partition you’re flashing in order to update the data on a partition heimdall needs to know how the partitions are laid out on your device samsung devices can dump their partition table in a format called pit heimdall can actually handle getting the pit file automatically but you still need to have a look to see which partition you want to be working on so first run1sudo heimdall printpit this will give you a full dump of all the partitions on your device it’s quite readable look for the partition with the flash filename “recoveryimg” it should look something like this12345678910111213 entry 20 binary type 0 apdevice type 2 mmcidentifier 19attributes 5 readwriteupdate attributes 1 fotapartition block size 491520partition block count 32768file offset obsolete 0file size obsolete 0partition name kernel2flash filename recoveryimg fota filename do not skip this step in theory all samsung galaxy s3 minis are identical but if yours is not you could brick your device it’s very easy to do figure out the identifier for that partition in my case it was “19” flash your recovery partition now that you know which partition you want to flash and you have a file to flash it with you can actually flash it with heimdall note that your phone probably restarted after running that pit command so you’ll have to get back into download mode again then just run1sudo heimdall flash 19 recoveryimg in that command “19” is the identifier of the partition i want to flash and “recoveryimg” is the clockworkmod rom which i downloaded right at the beginning of the post it will show you step by step what’s going on and then reboot the phone upon success4 connect to the phone with adbandroid has a wonderful tool in the sdk intended for debugging problems with android devices it’s called adb and it lets you connect to the android device over usb and run a variety of commands it even lets you get into a shell on the device if you don’t have adb already download the android developer tools if you aren’t planning on actually developing and just need adb like me then install from the slightly smaller package on that page listed under “use an existing ide” once you’ve downloaded and installed the developer tools you can find the adb command in the platformtools directory from the download adb cannot communicate with a phone unless “enable usb debugging” is turned on in the phone’s settings interface… but when you’re locked out that’s impossible fortunately if you boot into clockworkmod recovery debugging is turned on by default so reboot into clockworkmod by holding down the power home and volume up keys when clockworkmod recovery has loaded test the connection with adb by running1adb devices if you see your device listed you’re in business you can now pull files from the android device with “adb pull filename destination” of course that’s assuming you know your way around the android filesystemi found the easiest way to get all the data was to use clockwork mod’s built in backup system to make a backup of all data on the phone this takes a few minutes then i could pull the backups because i knew which directory they were in after running the backup all i had to do was1adb pull datamediaclockworkmodbackup desktopandroidbackup all of my friend’s photos videos and contacts were stored in the data tar archive i hope this helps someone else out thereposted by campbell vertesi ohthehugemanatee may 18 th 2014 android hacking tweet« why use an ide when vim is so awesome drupalcamp helsinki takes on the world »