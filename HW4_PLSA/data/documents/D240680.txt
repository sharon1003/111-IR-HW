firewalls by tony northrup on this page introduction the nature of today’s attackers the firewall to the rescue types of firewalls how a firewall works hostbased firewalls network firewalls firewalls for small offices and home offices firewalls for enterprises firewall products summary introduction firewalls are a key part of keeping networked computers safe and secure all computers deserve the protection of a firewall whether it’s the thousands of servers and desktops that compose the network of a fortune 500 company a traveling salesperson’s laptop connecting to the wireless network of a coffee shop or your grandmother’s new pc with a dialup connection to the internet this article covers the design deployment and use of both network and hostbased firewalls also called personal firewalls although home users have traditionally used only hostbased firewalls recent trends in security exploits highlight the importance of using both types of firewalls together traditional firewall architectures protect only the perimeter of a network however once an attacker penetrates that perimeter internal systems are completely unprotected hybrid worms in particular have penetrated corporate networks through email systems and then have spread quickly to unprotected internal systems applying hostbased firewalls to all systems including those behind the corporate firewall should now be standard practice top of page the nature of today’s attackers who are these “hackers” who are trying to break into your computer most people imagine someone at a keyboard late at night guessing passwords to steal confidential data from a computer system this type of attack does happen but it makes up a very small portion of the total network attacks that occur today worms and viruses initiate the vast majority of attacks worms and viruses generally find their targets randomly as a result even organizations with little or no confidential information need firewalls to protect their networks from these automated attackers if a worm or a virus does find a security vulnerability and compromises your system it can do one of several things to begin with it will almost always start looking for other systems to attack so that it can spread itself further in this case you become one of the bad guys—because the worm or virus is using your computer to attack other systems on your internal network and the internet wasting your computing resources and bandwidth even though the worm or virus won’t know what to do with your confidential data chances are good that it will open a new back door into your system to allow someone else to further abuse your computer and compromise your privacy worms and viruses have dramatically increased the need for network security of all kinds—especially the need for hostbased firewalls individuals still launch some attacks though and these are generally the most dangerous the least worrisome attackers focus on crashing computers and networks by using denial of service do s attacks others might be looking for confidential data that they can abuse for profit such as sales contacts financial data or customer account information still others might be amassing hundreds or thousands of computers from which to launch a distributed attack against a single network on the internet top of page the firewall to the rescue in the physical world businesses rely on several layers of security first they rely on their country’s government and military forces to keep order then they trust their local police to patrol the streets and respond to any crimes that occur they further supplement these public security mechanisms by using locks on doors and windows employee badges and security systems if all these defenses fail and a business is a victim of a crime the business’s insurance agency absorbs part of the impact by compensating the business for a portion of the loss unfortunately the state of networking today lacks these multiple levels of protection federal and local governments do what they can to slow network crime but they’re far from 100 percent effective beyond prevention law enforcement generally only responds to the most serious network intrusions the average internetconnected home or business is attacked dozens of times per day and no police force is equipped to handle that volume of complaints losses from computer crime are hard to quantify and predict and as a result most business insurance policies do little to compensate for the losses that result from a successful attack the one aspect of physical security however that isn’t missing from network security is the equivalent of door locks employee badges and security systems firewalls just as you lock your car and home you need to protect your computers and networks firewalls are these locks and just like in the physical world they come in different shapes and sizes to suit different needs the famous jargon dictionary has a great definition for firewall “a dedicated gateway machine with special security precautions on it used to service outside network connections and dialin lines” firewalls serve two useful purposes they filter what traffic comes into your network from the outside world and they control what computers on your network may send there it’s important to understand one thing however no firewall—whether a small free hostbased firewall or a multiplethousanddollar enterprise firewall array—will make your computers impervious to attack firewalls like locks and walls and moats and dragons create barriers to attack—they get in the way of someone trying to take control by making it difficult for attackers to get into your computer by making them invest lots of time you become less attractive firewalls very effectively block most bad guys from compromising an individual computer but it’s impossible to fully prevent every intrusion all software has bugs and someone might find an obscure bug in your firewall that allows them to pass through in a nutshell there’s no such thing as absolute security how much you invest in firewalls should be a function of how much you have to lose if an attack is successful top of page types of firewalls there are two main types of firewalls network firewalls and hostbased firewalls network firewalls such as the softwarebased microsoft’s internet security and acceleration isa server or the hardwarebased nortel networks alteon switched firewall system protect the perimeter of a network by watching traffic that enters and leaves hostbased firewalls such as internet connection firewall icf—included with windows xp and windows server 2003 protect an individual computer regardless of the network it’s connected to you might need one or the other—but most businesses require a combination of both to meet their security requirements top of page how a firewall works the sections that follow provide background information about network traffic and how firewalls filter traffic this information applies to all types of firewalls basic tcpip flow this section describes how tcpip packages its information to show how firewalls decide to allow or deny traffic tcpip traffic is broken into packets and firewalls must examine each packet to determine whether to drop it or forward it to the destination figure 1 shows a simplified breakdown of a packet with the following three key sections the ip header the tcp or udp header and the actual contents of the packet the ip header contains the ip addresses of the source which is the sender and the destination which is the receiver the tcp or udp header contains the source port of the sender and the destination port of the receiver to identify the applications that are sending and receiving the traffic in addition tcp headers contain additional information such as sequence numbers acknowledgment numbers and the conversation state the destination tcp or udp ports define the locations for delivery of the data on the server when the packet reaches its destination figure 1 an ip packet contains a header useful to firewalls it’s important to appreciate the communication flow of a tcpip conversation when configuring the firewall when a browser for example sends an http request to a web server the request contains the identity of the client computer the source ip address and the source port that the request went out on the source port of the client identifies the client application that sent the request—in this case the browser when the web server sends a response it uses the client’s source port as the destination port in the response the client operating system recognizes the port number as belonging to a session the browser application started and gives the data to the browser the source port for a client is typically a value greater than 1024 and less than 5000 packet filtering the primary purpose of a firewall is to filter traffic firewalls inspect packets as they pass through and based on the criteria that the administrator has defined the firewall allows or denies each packet firewalls block everything that you haven’t specifically allowed routers with filtering capabilities are a simplified example of a firewall administrators often configure them to allow all outbound connections from the internal network but to block all incoming traffic so a user on the internal network would be able to download email without a problem but an administrator would need to customize the router configuration to connect to your home pc from work by using remote desktop other applications that might require special firewall configuration are web cam servers collaboration software and multiplayer online games you use packet filters to instruct a firewall to drop traffic that meets certain criteria for example you could create a filter that would drop all ping requests you can also configure filters with more complex exceptions to a rule for example a filter might assist with troubleshooting the firewall by allowing the firewall to respond to ping requests coming from a monitoring station’s ip address by default microsoft isa server doesn’t respond to ping queries on its external interface you would need to create a packet filter on the isa server computer for it to respond to a ping request the following are the main tcpip attributes used in implementing filtering rules source ip addresses destination ip addresses ip protocol source tcp and udp ports destination tcp and udp ports the interface where the packet arrives the interface where the packet is destined if you’ve configured the firewall to allow all traffic by default you can use filters to block specific traffic if you’ve configured the firewall to deny all traffic filters allow only specific traffic through a common packetfiltering configuration is to allow inbound dns requests from the public internet so that a dns service can respond developers have designed most applications to work properly with both routers and hostbased firewalls but some might require you to configure your firewall to allow the application to communicate fortunately firewalls are very common and any application that requires a firewall should include information about how to configure your firewall hostbased firewalls are easier to configure than network firewalls and generally include a wizard to walk you through the configuration process many hostbased firewalls automatically prompt you the first time any application attempts to use the internet—whether the connection is inbound or outbound while using a hostbased firewall you might even notice applications that you didn’t know accessed the internet such as microsoft word figure 2 shows the filter configuration screen for icf figure 2 icf allows custom filters to be created figure 3 shows the filter configuration screen for a thirdparty firewall application zone alarm pro figure 3 zone alarm also allows custom filters to be created both of these examples demonstrate enabling the remote desktop feature in windows xp which uses tcp port 3389 you won’t be able to connect unless you open up port 3389 to permit the remote desktop capability to pass through for more information see the microsoft knowledge base article 308127 how to manually open ports in internet connection firewall in windows xp most modern firewalls are friendly enough so that they hide the port numbers from you for example icf allows you to choose the names of the applications that you want to allow through however it’s very common to need to add an application to the list of allowed traffic to add an application you need to know the port number that the application uses table 1 shows a list of port numbers for commonly used applications as mentioned earlier ports can be either a tcp port or a udp port most applications use tcp ports however dns uses udp and without dns you wouldn’t be able to find web sites on the internet table 1 common port numbers service port web server80tcp ssl secure sockets layer web server443tcp ftp21tcp pop3110tcp smtp25tcp remote desktop terminal services3389tcp imap3220tcp imap4143tcp telnet23tcp sql server1433tcp ldap389tcp msn messenger1863tcp yahoo messenger5050tcp aol instant messenger and icq5190tcp irc internet relay chat66656669tcp dns53udp to use tcpudp portfiltering tools effectively configure the filtering tool to accept requests through each port that your server applications require and to refuse requests from all other tcp or udp ports making a careful determination of your applications’ tcpudp port requirements and setting your filtering tools accordingly allows you to avoid mistakes that would deny access to the services you’re trying to provide filtering out all traffic to other tcp and udp ports eliminates unnecessary exposure to attack filtering based on source and destination some types of firewalls can filter traffic based on source or destination ip address ip addresses are the telephone numbers of the internet they’re the unique numeric label that identifies a single host’s location filtering based on source or destination address is useful because it enables you to allow or deny traffic based on the computers or networks that are sending or receiving the traffic this is useful in two ways first you can configure firewalls to block specific web sites blocking web sites by name is a form of destination filtering second firewalls can allow or deny traffic based on the computer sending the request this allows administrators to disable instant messaging from the computer in one organization while allowing the same protocol from a different set of computers source filtering also allows you to give greater access to users on internal networks than those on external networks it’s common to use a firewall to block all requests sent to an internal email server except those requests from users on the internal network you can also use source filtering to block all requests from a specific address—for example to block traffic from an ip address identified as having attacked the network stateful inspection filtering stateful inspection is the process of inspecting packets as they reach the firewall and maintaining the state of the connection by allowing or disallowing packets to pass based on the access policy to further help you understand how state is maintained figure 4 shows how a conversation between a client and a server takes place through the isa server computer in this scenario web publishing has been configured on the isa server computer to support redirecting external internet requests on port 80 to the internal iis server figure 4 sample conversation through isa server this is the flow of the conversation the internet client initiates an http request to the web server and sends an ip packet with the source and destination address and ports the isa server computer receives the request for the web server isa server then modifies the packet replacing the source address and port with its own internal address and changes the destination ip address to the address of the real iis server isa server adds the source and destination ports and addresses into its own table to keep track of the conversation isa server sends the modified packet to the internal iis server the iis server responds to the request by using isa server as the destination address and tcp port 5300 isa server receives the packet from the iis server and looks in its table for 5300 which maps to the internet client isa server then modifies the packet and replaces the iis server’s source ip address and port with its own source ip address and port isa server then changes the destination ip address and tcp port to that of the internet client the internet client listens for a response on tcp port 5100 in addition to maintaining the tcp or udp conversation based on ip addresses and ports isa server also checks the tcp flags the sequence and acknowledgment numbers within the tcp header fields for tcp conversations the flags represent the state of the conversation whether it’s the beginning of a conversation syn the middle of a conversation ack or the end of the conversation fin if any of the flags are out of sequence isa server blocks the connection the sequence and acknowledgment fields provide the information to ensure that the next packet received in the conversation is the correct one once again any request that doesn’t fit the state of the conversation is blocked applicationlayer filtering applicationlayer firewalls can understand the traffic flowing through them and allow or deny traffic based on the content hostbased firewalls designed to block objectionable web content based on keywords contained in the web pages are a form of applicationlayer firewall you also use applicationlayer firewalls to inspect packets bound for an internal web server to ensure the request isn’t really an attack in disguise currently the ability to inspect a packet’s contents is one of the best ways to distinguish between firewall products icf lacks this feature however most businessoriented firewalls do include this capability isa server is also an applicationlevel proxy that’s able to read data within packets for a particular application and perform an action based on a rule set in addition isa server comes with predefined application filters that inspect each packet and block redirect or modify the data within the packet for instance you can implement webrouting rules that tell the isa server computer to redirect an http request to a certain internal iis server based on the url in the packet another example is the dns intrusiondetection filter this filter blocks packets that aren’t valid dns requests or that fit common types of dns attacks you can invoke application filtering on isa server when web publishing or server publishing is configured logging firewalls don’t prevent attacks they simply reduce the likelihood of a breakin when you deploy a firewall you’ll still get just as many attacks as you always did—you just won’t have to worry about them as much all firewalls provide some capability for logging these attacks for later manual review this allows administrators to watch for attacks that are outoftheordinary it’s also useful for forensics purposes if an attacker does manage to defeat your firewall you can refer to the firewall’s log and gather information to determine how the attacker carried out the attack this log can be useful to law enforcement officials if they’re involved in a related investigation intrusion detection intrusion detection is an advanced firewall feature and many firewalls such as icf lack this feature intrusion detection systems idss can identify attack signatures or patterns generate alarms to alert the operations staff and cause the routers to terminate the connection with the hostile sources these systems can also prevent do s attacks a do s attack occurs when a user sends fragments of tcp requests masked as legitimate tcp requests or sends requests from a bad ip source the server can’t handle so many requests and displays a do s message to legitimate site users idss provide realtime monitoring of network traffic and implement the “prevent detect and react” approach to security although idss are necessary to meet security requirements for many businesses and some home users their use has downsides that you should take into account idss are processingintensive and can affect the performance of your site idss are expensive idss can sometimes mistake normal network traffic for a hostile attack and cause unnecessary alarms these unnecessary alarms can be so frequent that they cause operational staff to ignore genuine alarms there are a number of thirdparty tools available for intrusion detection for example you can use cisco’s intrusion detection system ids or iss’s real secure for realtime network traffic monitoring idss are still in the process of being enhanced and developed antivirus the term “virus” is used to describe selfreplicating computer programs that propagate themselves between files on a computer and even between computers viruses usually but not always do something malicious such as overwrite files or waste your bandwidth by sending copies of themselves to everyone in your address book antivirus capabilities are a feature of some network and hostbased firewalls network firewalls might inspect all incoming email traffic for virusinfected attachments and filter them out hostbased firewalls might change the configuration of the user’s email client so that the email client sends all requests through the hostbased firewall firewalls are certainly not the only way to protect yourself from viruses and if the firewall you choose doesn’t have antivirus features you’ll need to complement it with antivirus software the best way to protect your organization against viruses is to use a goodquality commercial antivirus package these scanners examine the files folders mail messages and web pages on your computers looking for the distinctive patterns of viral code when the scanner detects something that looks like a virus it quarantines the suspect object and warns you about what it found if your organization uses outlook as its mail client be sure to install the outlook security update which gives you a great deal of protection against emailborne viruses note that this update’s functionality is built into outlook 2002 which comes as part of office xp tech net has a great summary page that’s continually updated to reflect newly emergent viruses while you’re reading it reflect on the fact that most emailcarried viruses spread because people do things they shouldn’t such as launch attachments from unknown sources vpns and encryption port forwarding is sufficient for publishing a web site through your firewall however it’s not sufficient if you want to connect two internetconnected networks that are both protected by firewalls for this you should use a virtual private network vpn a vpn is the extension of a private network that encompasses encapsulated encrypted and authenticated links across shared or public networks vpn connections can provide remote access and routed connections to private networks over the internet accessing the corporate network requires administrators to enforce strong authentication to validate identity as well as provide strong encryption to prevent users from communicating data “in the clear”vpns aren’t strictly a firewall feature and many businesses implement them by using completely separate dedicated vpn devices however network architects generally place network firewalls at the perimeter of the network just like a vpn both firewalls and vpns are designed to improve network security so it’s logical that vpn capabilities have become a feature of many firewalls if you’re using a windows 2000 server or windows server 2003 system as your network firewall you already have vpn capabilities built into the base platform all recent windows platforms provide the authentication and encryption infrastructure to enable secure connectivity with the windows 2000 server and windows server 2003 builtin vpn server and windows xp vpn client organizations can take advantage of a secure standardsbased vpn directly “out of the box” because microsoft supports vpn standards such as l2tpipsec and smart card authentication organizations have access to the encryption authentication and interoperability that best meet their vpn security needs although organizations often use vpns to encrypt traffic over the internet between users and the corporate network they can also implement encryption between any windows 2000 windows server 2003 and windows xp machine since microsoft has full standardsbased support for the ipsec security extensions organizations can provide robust encryption of all network traffic without requiring cumbersome changes to deployed applications servers or network hardware top of page hostbased firewalls hostbased firewalls are software firewalls installed on each individual system depending on the software you choose a hostbased firewall can offer features beyond those of network firewalls such as protecting your computer from spyware a component of some free software that tracks your web browsing habits and trojan horses a program that claims to do one thing but does another malicious thing such as recording your passwords if you travel with a laptop a hostbased firewall is a necessity—you need protection wherever you connect to the internet and your hardware firewall can protect you only at home why would you buy thirdparty firewall software when windows xp includes icf for free icf is designed to provide basic intrusion prevention but doesn’t include the rich features of a thirdparty firewall application most thirdparty firewalls protect you from software that could violate your privacy or allow an attacker to misuse your computer—features not found in icf also you can install thirdparty firewall programs on systems that have older versions of windows note that firewall software doesn’t replace antivirus software you should use both popular hostbased firewall products include zone alarm tiny personal firewall agnitum outpost firewall kerio personal firewall and internet security systems’ black ice pc protection most hostbased firewall software is available in free or trial versions so it won’t cost you anything to download these packages and determine whether they meet your needs better than icf top of page network firewalls network firewalls protect an entire network by guarding the perimeter of that network network firewalls forward traffic to and from computers on an internal network and filter that traffic based on the criteria the administrator has set network firewalls come in two flavors hardware firewalls and software firewalls hardwarebased network firewalls are generally cheaper than softwarebased network firewalls and are the right choice for home users and many small businesses softwarebased network firewalls often have a larger feature set than hardwarebased firewalls and might fit the needs of larger organizations softwarebased firewalls can also run on the same server as other services such as email and file sharing allowing small organizations to make better use of existing servers network firewalls often include additional features that aren’t necessary for hostbased firewalls as described in the following sections proxy services if you have or are planning to have a home or small office network you’ll have to create a gateway from your firewall to the rest of the network if you’re implementing a software firewall on a specific computer this means that you’ll need at least two network cards in that machine you attach one network card to the public interface such as a dsl or cable modem and you attach the other network card to your internal network you then have to configure the computer to allow traffic on one side of the network to communicate with the other ics allows you to do this in both windows 2000 and windows xp however at this stage in the game many small office users decide to buy a dedicated residential gateway see figure 5 these units plug directly into the dsl router or cable modem and provide the functionality of a firewall and network hub you need to configure a residential gateway to act in the stead of the computer running ics when contacting the isp for example if you had a static ip address you would have to assign that ip address to the gateway instead of your computer you could either assign a new ip address to your computer or more likely instruct the computer to ask the gateway for an ip address figure 5 a fullfledged small office network complete with a residential gateway if a small business is using the 19216800 network id for its intranet and its isp has granted it the public address of w1x1y1z1 then network address translation nat maps all private addresses on 19216800 to the ip address of w1x1y1z1 if nat maps multiple private addresses to a single public address it uses dynamically chosen tcp and udp ports to distinguish one intranet location from another note the use of w1x1y1z1 and w2x2y2z2 is intended to represent valid public ip addresses assigned by an isp figure 6 shows an example of using nat to transparently connect an intranet to the internet figure 6 using nat to connect an intranet to the internet if a private user at 192168010 uses a web browser to connect to the web server at w2x2y2z2 the user’s computer creates an ip packet with the following information destination ip address w2x2y2z2source ip address 192168010destination port tcp port 80source port tcp port 5000the private user’s computer then forwards this packet to the nat server which translates the addresses of the outgoing packet to the following destination ip address w2x2y2z2source ip address w1x1y1z1destination port tcp port 80source port tcp port 1025the nat server keeps the mapping of 192168010 tcp 1025 to w1x1y1z1 tcp 5000 in a table the nat server then sends the translated packet over the internet to the web server the web server sends the response back to the nat server when the nat server receives the packet the packet contains the following public address information destination ip address w1x1y1z1source ip address w2x2y2z2destination port tcp port 1025source port tcp port 80the nat server checks its translation table and maps the public addresses to private addresses and forwards the packet to the computer at 192168010 the forwarded packet contains the following address information destination ip address 192168010source ip address w2x2y2z2destination port tcp port 5000source port tcp port 80for outgoing packets from the nat server the nat server maps the source ip address a private address to the isp allocated address a public address and maps the tcpudp port numbers to a different tcpudp port number for incoming packets to the nat server the nat server maps the destination ip address a public address to the original intranet address a private address and maps the tcpudp port numbers back to their original tcpudp port numbers note nat properly translates packets that contain the ip address only in the ip header nat might not properly translate packets that contain the ip address within the ip payload reverse proxy services most proxy servers offer services beyond the standard functionality discussed above reverse proxy enables the firewall to provide secure access to an internal web server not exposing it to the outside by redirecting external http application proxy requests to a single designated machine this isn’t suitable for multiserver web hosting reverse hosting—described next—takes care of this but it can be quite valuable when working with a single site reverse hosting allows the firewall to redirect http application proxy requests to multiple internal web servers one methodway is to provide access to multiple servers as subwebs of one large aggregate web site or as multiple independent web servers more flexible than reverse proxy but equally secure this method enables you to abstract the physical architecture of your web sites by mapping multiple servers to a single logical one both options allow the firewall to offer caching functionality which can improve responsiveness server proxy provides the same functionality as reverse proxy and reverse hosting but unlike these features it works with protocols other than http to provide secure access from the internet to internal resources such as internal mail or sql server to an outside user the proxy server appears to be the mail or sql server basically server proxy responds to external requests on behalf of the internal servers which simply have to run the proxy client that redirects the listen directive on a given port to a proxy server the security benefit is obvious placing servers behind a proxy prevents direct tampering from the outside and fools wouldbe attackers into thinking that the proxy server is the box containing the information they want reverse proxy can be very useful for instance suppose you need to allow a web server to query an internal database there are several ways to do this you could replicate the database to the outside if it’s not too large but this puts the contents’ integrity at risk it might make more sense to move the web and database servers behind the firewall and use reverse proxy or reverse hosting to get at the site this option is very secure although the overhead of running multiple web servers behind the proxy might tax the proxy’s ability to service web requests from internal clients a third alternative is better yet place the web server in the demilitarized zone dmz and use the server proxy functionality of the firewall to query the database this option which figure 7 below shows provides good security and performance before you select any of these options you should analyze your requirements so that you can balance necessary security against performanceusability figure 7 firewalls can act as reverse proxies for web servers top of page firewalls for small offices and home offices firewalls used to be only for large corporate networks—but then again internet connections used to be only for large networks too now that highspeed alwayson internet connectivity is becoming more and more common so too are attacks against connected computers firewalls help protect you against such attacks by screening out many types of malicious traffic in addition firewalls can help keep your computer from participating in attacks on others without your knowledge the good news is that consumerlevel firewalls provide good security without requiring that you be a computer security expert it used to be true that if you had a computer or two in a small office the biggest risk you faced was losing data due to a fire hardware failure or other catastrophe although those risks are still with us the blessing of alwayson highspeed internet connectivity has exposed us to new threats as well as intensifying some older ones the good news is that with the right tools you can do a great deal to safeguard your computer systems against malicious attacks viruses and other bad stuff some of thesetools come included with various versions of windows others come from thirdparty vendors such as symantec mc afee and others it’s not necessarily important that you use a particular brand of tool it’s more important that you have the right tools no matter who makes them once you decide you need a firewall for your small office or home office the first step in setting up a firewall is simple decide whether a hardware or a software solution will work best for your needs firewall products come in many different forms from freely available software for your computer to tamperresistant industrial units whether you buy a certified firewall or not no matter what kind of firewall you buy all firewalls provide the same basic feature control of inbound and outbound traffic when making this decision you should be asking the following questions are my computers all running windows xp or windows server 2003 if so you already have a builtin firewall icf so you might not need to buy anything additional do i want to share my internet connection between multiple computers if you do you either have or will have your computers networked together in that case you can use windows’ internet connection sharing ics feature to share the connection ics is included with windows 2000 windows xp and windows server 2003 do i want to be able to share my connection without using one computer as a firewall perhaps you want to share your internet connection but you don’t want to have to use one particular computer as the gateway—ics only works when the computer running it is powered up and on the network instead you can buy an inexpensive appliance that acts as a gateway for sharing connections—these socalled “internet access routers” or “residential gateways” almost always include basic firewall functionality for maximum security you can install a hardware firewall to protect your small office network and then combine it with icf or another hostbased firewall you can configure hostbased firewalls for individual machines so that each machine on your network can have different network permissions if that’s what you need in addition hostbased firewalls can alert you when software on a machine that has a firewall is sending out data when it shouldn’t hardwarebased firewalls are typically very flexible and powerful once you get them set up you can leave them alone and let them work to silently protect you of course getting them set up in the first place can be a difficult exercisecombining the two types can give you tighter security than using either one alone for maximum security the most reliable way for small office users to protect a network is to purchase a router with firewall capabilities these routers do more than act as a firewall—they network multiple computers allow them to share a single internet connection and might even support wireless networking if you have more than one computer and an alwayson broadband connection a routerfirewall gives you the benefits of a small office network and connects every computer to the internet the router is generally a separate device from the cable or dsl modem—it’s important to understand that most cable and dsl modems offer your small office network no protection whatsoever if you didn’t choose to pay extra for security features you probably don’t have any if you’re unsure about your modem ask your isp what level of protection your modem provides using a router with firewall capabilities has several advantages over using hostbased firewall software hostbased firewalls can protect only one computer at a time and configuring a hostbased firewall for every computer on your small office network can be a nuisance hostbased firewalls are completely unable to protect other types of devices connected to your network such as a game system or personal television viewer finally if you use multiple operating systems on your computer or experiment with beta operating systems it’s easy to forget to install a hostbased firewall for every os if you decide to use a hardware firewall select one that has enough network ports to allow you to connect all computers and other network devices directly to it as shown in figure 8 wiring a firewall into your network is as simple as adding an answering machine to your phone line simply unplug the ethernet connection between your cabledsl modem and your pc and plug it into the firewall then connect your computer and other network devices into your firewall configuring a hardware firewall isn’t as simple—we’ll discuss that later figure 8 wiring a firewall into a network the following are some of the popular hardware firewall products available linksys routers netgear routers and smc routers home and small office computers that are directly connected to the internet require the added security of a firewall the least expensive way to do this is to enable both icf and ics on a system and allow all networked computers to connect through that system you can enable ics on only one internet connection on your network and you should protect this connection by enabling icf icf can check only the communications that cross the internet connection on which it’s enabled the following types of network topologies which figure 9 and figure 10 show are safe and the most recommended figure 9 an example of using ics to connect a lan to the internet figure 10 an example of using ics to connect multiple networks to the internet you should avoid topologies with multiple internet connections if you must have multiple direct internet connections on your network you should ensure that icf is enabled on each direct internet connection in order to protect your network as shown in figure 11 however because icf works on a perconnection basis this topology is still not a recommended topology because there’s no central point of administration through which you can ensure the continuous protection of all internet connections figure 11 multiple internet connections are more difficult to secure likewise as figure 12 shows providing internet connectivity to your network by connecting your network hub directly to the internet causes similar vulnerabilities and isn’t a recommended topology figure 12 lan systems are not protected unless all traffic passes through icf enabling icf on this type of network topology disrupts some network communications and provides protection only for the computer on which it’s enabled the other computers have direct connections to the internet through the hub and aren’t protected top of page firewalls for enterprises organizations of all sizes want secure network connectivity to their business data and applications the need to connect and collaborate with partners customers and remotemobile employees anytime and anywhere has expanded network connectivity requirements beyond traditional wired local area networks lans to include dialup remote access vpns and wireless networks to enable greater access to the network and higher productivity customers must address issues around security management complexity and cost with windows server 2003 windows 2000 windows xp and a carefully designed firewall architecture administrators can provide secure and integrated network connectivity to businesscritical applications and data when addressing secure network connectivity administrators need to consider the following security employees not only work from corporate offices but also from branch offices home offices or the road providing remote connectivity requires solutions that are secure standardsbased and manageable management complexity many vendors offer dedicated product solutions with little integration with other products and infrastructure setting up wireless clients with centralized authentication and policies can be a challenge unless there are integrated solutions lowering cost secure networking can be expensive if there are multiple products and technologies with separate licensing support contracts and training for example a secure vpn implementation might require a separate certificate authority for pki a separate authentication model clientside software and additional server gateways and firewalls by addressing these key secure connectivity challenges organizations can achieve greater employee productivity decrease costs and improve business integration hostbased firewalls on corporate networks corporate networks also employ layers of defense often there will be some traffic screening at the router connecting the network to the internet one or more enterpriseclass firewalls virus scanning engines on the email servers and some kind of intrusion detection mechanism an interesting consideration is whether hostbased firewalls make sense in corporate networks enterprise firewalls and hostbased firewalls operate at different defensive layers enterprise firewalls protect entire networks whereas hostbased firewalls protect individual hosts so in one sense combining the two seems appropriate hostbased firewalls however block certain corporate network activity for instance some organizations periodically scan corporate clients for conformance to password policies hostbased firewalls interfere with this operation firewalls like icf that block all incoming connections interfere with lanbased applications that need to send notices to client computers printer status messages and exchange new mail notification are two examples your organization’s security policy needs to describe whether hostbased firewalls are permitted and how they should be configured icf in windows xp obeys network location awareness and you can disable it via windows server 2003 active directory ad group policy mobile users don’t have to remember to enable or disable icf as they roam about they can leave icf enabled being protected while at home or traveling at the office group policy can disable icf whenever a computer is attached to the corporate network using a demilitarized zone most organizations use their internet connection to expose services to the public internet at a minimum smtp services are exposed to allow inbound email you can use filtering and port forwarding to allow this traffic through a firewall but many organizations require a dmz to further protect the internal network this section discusses how to secure your dmz—the area in which you typically place your servers that expose public services to provide the best security a dmz consists of frontend servers backend servers and firewalls the firewalls protect the frontend servers from the public network and filter traffic between the corporate network and backend servers a dmz provides a multilayer protection system between the internet and the internal network of an organization to provide protection the dmz comprises a firewall that protects the frontend servers from internet traffic a set of “securityhardened” servers that support the services the application provides you set up these servers so that dangerous internet services such as file sharing and telnet are disabled a firewall that separates the backend servers from the corporate networks and enables communication between the backend servers and a few servers within the corporate network a dmz is an important element for securing a site you need to take additional security measures to protect data the backend servers store you can also store extremely sensitive data or data that’s needed elsewhere in your enterprise outside the dmz although doing so has negative performance implications and runs the risk however small of opening your corporate network to hacking at the very least a dmz requires a router a more sophisticated design would include two routers and a firewall how complex your configuration needs to be depends on factors such as how much security you need what sort of connectivity your system maintains to other networks internal—corporate network external—internethow many servers you need to protect figure 13 and figure 14 below show dmz configurations common in corporate environments today both provide excellent protection for the internal network figure 12 shows a simpler configuration the configuration that figure 14 shows protects the dmz servers with the same security features used to protect the internal network controlling dmz access from the trusted and untrusted sides of the firewall it’s more complex but more secure figure 13 a simple dmz configuration figure 14 dmz configuration controlling dmz access from the trusted and untrusted sides of the firewall after dmz topology the most important step in securing the environment is controlling its traffic you need to determine who’s allowed to connect and who isn’t and then enforce those rules usually with routers and firewalls routers can provide packet filtering which controls traffic flow between two nodes but this tends to decrease router performance so you have to be careful not to overuse it check your router utilization before and after you must give particular attention to each server in the dmz to ensure they’re capable of withstanding malicious attacks you can harden the exposed servers by using the security tools and checklists for your servers’ operating systems you can also implement lowlevel filtering policies and close selective ports for example you should configure a hostbased firewall on systems in a dmz standard dmz web site architectures if you’re going to implement an ecommerce or enterprise application you have to be concerned with the security of your systems and data to ensure that people who shouldn’t be accessing data can’t get at it and to ensure that your system will be available despite attempts at a do s attack for enterprise applications the main worry is unscrupulous employees—so security is typically enforced by using windows and ad authentication and authorization but malicious attackers can also attack ecommerce applications from outside your company via the internet and since it’s not practical to give every anonymous customer their own windows logon id you’ll need to use a different sort of authentication because the network is the internet instead of an intranet that you control you’ll also have to prepare your servers to make other sorts of attacks impossible or ineffective finally you’ll have to be especially careful protecting customer data such as credit card numbers if you plan to host the site at your corporate facilities you’ll need to use a dmz the internetfacing firewall must provide access to services such as http https ftp and smtp mail if you’re collocating your servers at a hosting provider’s network a single internetfacing firewall might be sufficient however you’ll also need to use a vpn to securely manage the site from your corporate network figure 15 shows a typical architecture for hosting a largescale ecommerce site using an enterprise’s existing internet connection figure 15 a typical selfhosted ecommerce web architecture in general here’s what happens clients access the application over the internet requests pass through a firewall which filters out packets sent to the wrong address or wrong ports the external firewall filters these requests ensuring they originate from a valid address and are destined for a valid address and port number if the firewall is an applicationlayer firewall it will verify that the name of the page requested is valid and the request is wellformed a web server running iis handles the requests typically by using an asp net page and requests information from the database servers as needed the web servers may make requests to resources located within the corporate network the dmz’s internal firewall—a final layer of protection for the internal network—filters these requests this additional protection is critical since the risk of an attacker compromising externally facing web servers is much higher than other internal servers and an attacker might leverage them as a launching point for further attacks against the internal network multilayer firewall web site architectures many organizations have security requirements that necessitate placing a firewall between the frontend web servers and the backend database servers figure 16 shows an example architecture that meets those requirements and provides redundancy while minimizing cost by using multihomed redundant firewalls in this architecture requests the web servers send to the database servers must pass through the redundant firewalls the firewalls can verify the source and destination of the address and validate that it’s a legitimate request this example architecture is placed at an internet data center where administrators perform management of the systems remotely therefore the firewalls have vpn capability allowing administrators to securely access the web and database servers from the corporate network figure 16 firewall placement in the internet data center architecture the firewalls in this architecture must support packet filtering stateful inspection applicationlevel filtering and vpns further they must be capable of supporting a sufficient number of connections and throughput to handle inbound requests from web users outbound responses to clients requests between the web and database servers and connections across the vpn for system management a typical production architecture would include another network connected to the firewalls or directly to the servers for backing up data top of page firewall products this section provides an overview of some key firewall products and categories internet connection firewall icf is hostbased firewall software that you use to set restrictions on what traffic is allowed to enter your computer icf protects your computer against external threats by allowing safe network traffic to pass through the firewall into your network while denying the entrance of unsafe traffic if you configure icf on a system that uses ics that protection is extended to all traffic passing through the system if your network uses ics to provide shared internet access to multiple computers you should enable icf on the shared internet connection as figure 17 shows figure 17 enabling icf on an icsenabled system increases the security of the entire network although it’s critical to enable icf on the internet connection of any computer that’s connected directly to the internet you should enable icf on all network interfaces to protect against attacks originating from the internal network icf can provide protection to a single computer connected to the internet with a cable modem to check to see whether icf is enabled on windows server 2003 or to enable icf see to enable or disable icf for information about using icf see protecting your home or small office network using internet connection firewall how icf works icf is considered a stateful firewall to prevent unsolicited traffic from the public side of the connection from entering the private side icf keeps a table of all communications that have originated from the icf computer when used in conjunction with ics icf tracks all traffic that has originated from the icfics computer and all traffic that has originated from private network computers icf compares all inbound traffic from the internet against entries in the table icf allows inbound internet traffic to reach the computers in your network only when there’s a matching entry in the table that shows that the communication exchange originated from your computer or private network to thwart common hacking attempts such as port scanning the firewall drops communications that originate from the internet rather than sending you notifications about firewall activity icf silently discards unsolicited communications because frequently sending such notifications could become a distraction instead icf creates a security log to track this activity for more information see internet connection firewall security log you can configure services to allow the icf computer to forward unsolicited traffic from the internet to the private network for example if you’re hosting an http web server service and the http service is enabled on your icf computer the icf computer forwards unsolicited http traffic icf requires a set of operational information known as a service definition to allow it to forward unsolicited internet traffic to the web server on your private network service definitions for icf work on a perconnection basis if your network has multiple firewall connections you should configure service definitions on all firewall connections for information about service definitions see service definitions for internet connection firewall and internet connection sharing for information about adding and editing service definitions see to manage service definitions for icf or ics note microsoft includes ics and icf only with windows xp windows server 2003 standard edition and the 32bit version of windows server 2003 enterprise edition these features aren’t included with windows server 2003 web edition the 32bit version of windows server 2003 datacenter edition or the 64bit versions of the windows server 2003 family for those who live and breathe tcpip icf’s engine uses addresses ports sequence numbers and flags in its state table for tcp the outgoing request must have only the syn flag turned on incoming replies must have only the ack and syn flags turned on the next outgoing packet must have only the ack flag turned on if this sequence is violated icf terminates the connection also icf drops any incoming packet including acksyn that it can’t associate with using addresses ports and sequence numbers a previous outgoing ack icf also drops any incoming unsolicited syn unless it matches a userdefined exception see the next section when icf discards packets it does so silently it never returns an rst icf “forgets” about a particular state between the client and a server when it sees a special connectiontermination sequence for tcpbased communications ackfin ack ackfin and acka period of inactivity a “timeout” for udpbased communications essentially icf allows in only that which is a reply to a previous request that went out icf blocks and discards all other incoming traffic it seems simple but it’s an extremely effective method for protecting a computer even enterpriseclass firewalls operate using the same basic principle this method means that icf blocks the following kinds among others of potentially dangerous communications scans attackers often scan computers looking for vulnerabilities especially the popular wellknown cablemodem subnets because incoming scans are “unsolicited” ie don’t match something in icf’s traffic memory icf blocks them many but not all trojans say you get infected with a trojan horse program many of these announce their existence to some database somewhere if an attacker tries to connect to the trojan on your computer icf blocks it note that this applies only to trojans in which the attacker makes the first connection to the infected computer other trojans that make the first connection to the attacker open a connection in icf’s memory allowing the attacker to reply this is why you need a virus scanner in addition to icf—goodquality virus scanners also prevent you from getting infected with trojans in the first place file sharing and anonymous connections windows networking is intended to allow easy file sharing between computers you use anonymous connections for discovering a computer’s name and list of available file shares of course on the internet you really don’t want to do this icf prohibits these kinds of connections by default turning on icf automatically blocks all communications originating from foreign computers to all ports on your computer this essentially renders your computer invisible to port scanners hacking tools that repetitively try different ports on a network address to see how a particular machine might be attacked hackers frequently run port scanners against dsl and cablemodem services to see whether they can find any unsecured machines with icf running the port scanners never see your machine if you want to enable internet users to communicate with your machine as you might if you’re running a web server or using a popular peertopeer program you can choose to allow communications to specified ports by clicking on the settings button on the advanced tab in the properties window of your public network connection although the code red and nimda viruses demonstrate the importance of patching services even when they’re not exposed through the firewall once you open up a port to the outside world it’s imperative you apply and keep uptodate with any patches for that service windows update provides an easy way to ensure that you’re uptodate with windows xp services if you’re hosting a service that you want other computers to have access to you need to let icf know that it’s ok for computers to access it the classic example is a web server icf is easily configurable for any services that you might be running on your computer and comes preconfigured with definitions for common protocols and services such as http ftp and smtp even if the service or programs that you want to expose aren’t on the default list you can add them by defining the internal and external tcp ports that they utilize icf and notification messages because icf inspects all incoming communications some programs especially email programs might behave differently when icf is enabled some email programs periodically poll their email server for new mail and some email programs wait for notification from the email server outlook express for example automatically checks for new email when its timer tells it to do so when new email is present outlook express prompts the user with a new email notification icf won’t affect the behavior of this program because the request for new email notification originates from inside the firewall the firewall makes an entry in a table noting the outbound communication when the mail server acknowledges the new email response the firewall finds an associated entry in the table and allows the communication to pass and then the user receives notification that a new email message has arrived outlook 2000 however is connected to a microsoft exchange server that uses a remote procedure call rpc to send new email notifications to clients outlook 2000 doesn’t automatically check for new email when it’s connected to an exchange server the exchange server notifies outlook 2000 when new email arrives because the exchange server—which is outside the firewall—not outlook 2000—which is inside the firewall— initiates the rpc notification icf can’t find the corresponding entry in the table and it doesn’t allow the rpc messages to cross from the internet into the network icf drops the rpc notification message users can send and receive email but need to manually check for new email advanced icf settings the icf securitylogging feature provides a way to create a security log of firewall activity icf is capable of logging both traffic that’s permitted and traffic that’s rejected for example the firewall by default doesn’t allow incoming echo requests from the internet if the internet control message protocol icmp allow incoming echo request isn’t enabled then the inbound request fails and icf generates a log entry that notes the failed inbound attempt for information about icmp see internet control message protocol icmp icmp allows you to modify the behavior of the firewall by enabling various icmp options such as allow incoming echo request allow incoming timestamprequest allow incoming router request and allow redirect the icmp tab provides brief descriptions of these options for navigation and instructions for icmp see enable internet control message protocols you can set the allowable size of the security log to prevent the potential overflow that do s attacks could cause icf generates eventlog entries into the extended log file format as established by the world wide web consortium w3c for more information about icf security logging see internet connection firewall security log file overview other hostbased firewalls if you’re not running windows xp or if you want to have greater control and awareness of what your firewall is doing on your behalf a separate hostbased firewall software package might serve you better there are a variety of good products available that enhance your computer’s security for example zone alarm by zone labs not only filters incoming connections but also filters outgoing connections by program that means that you can specify which programs on your computer should be able to communicate over the internet and which if any should be prevented from doing so microsoft internet security and acceleration server 2000isa server is part of the microsoft  net enterprise server family which comprises a comprehensive set of server applications for quickly building deploying and managing scalable and integrated webbased solutions and services designed with missioncritical performance and integration in mind the  net enterprise servers are built from the ground up for interoperability using open web standards such as xml the  net enterprise servers along with the windows 2000 operating system supply the foundation for the  net platform which enables the thirdgeneration internet where software is delivered as a service is accessible by any device at any time and any place and is fully programmable and customizable microsoft explicitly designed the  net platform to enable the rapid development integration and orchestration of any group of web services and applications into a single comprehensive solution isa server is an extensible enterprise firewall and webcache server that integrates with windows 2000 for policybased security acceleration and management of internetworking isa server provides two tightly integrated modes a multilayer firewall and a highperformance webcache server the firewall provides filtering at the packet circuit and application layers stateful inspection to examine data crossing the firewall control of access policy and routing of traffic the cache improves network performance and the user experience by storing frequently requested web content you can deploy the firewall and cache on dedicated servers separately or integrated on the same box sophisticated management tools simplify policy definition traffic routing server publishing and monitoring isa server builds on windows 2000 security directory vpn and bandwidth control whether deployed as a set of separate firewall and cache servers or in integrated mode isa server can enhance network security enforce consistent internet usage policy accelerate internet access and maximize employee productivity for organizations of all sizes isa server 2000 enterprise edition is microsoft’s scalable enterprise firewall and webcaching server microsoft designed isa server enterprise edition to meet the performance management and scalability needs of highvolume internet traffic environments with centralized server management multiple levels of access policy and fault tolerance isa server enterprise edition provides fast secure and scalable internet connectivity for missioncritical environments administrators must secure the network access points of corporate networks against hackers and unauthorized access blocking traffic and shutting down ports aren’t sufficient or feasible in an internetconnected organization having security solutions that “look inside” network traffic to validate applicationspecific requests mitigates risks isa server enterprise edition provides organizations with the statefulpacket inspection and applicationlayer firewall protection required to protect against today’s sophisticated attacks with isa server enterprise edition’s applicationlevel filtering technology you can mitigate attacks such as code red and nimda at the firewall before they enter company networks isa server enterprise edition integrates with microsoft management console mmc and ad to provide a single directory to validate and manage all access requests for application data or services this enables consolidation of access control and authorization policy in a centrally managed replicated and secure repository isa server enterprise edition is also designed to work best with exchange 2000 and iis to provide fast and secure access to email and web content the following sections describe some of the more significant product capabilities of isa server multilayer firewall security a firewall can enhance security through various methods including packet filtering circuitlevel filtering and application filtering advanced enterprise firewalls such as that provided with isa server enterprise edition combine all three of these methods to provide protection at multiple network layers circuitlevel filtering at the circuit level the isa server firewall service works with virtually all internet applications and protocols—such as telnet mail news microsoft windows media technologies real audio and internet relay chat irc—and other client applications the firewall service makes these applications perform as if they were connected directly to the internet isa server offers circuitlevel filtering for both firewall and secure nat clients circuitlevel filtering enables support for virtually all standard and custom internet applications on the windows platform these applications communicate on the network by using winsock and you can support them unmodified on client machines that have the firewall client software installed circuitlevel filtering inspects sessions rather than connections or packets a session can include multiple connections providing a number of important benefits for windowsbased clients running the firewall client software packet filtering the packetfiltering capability of isa server enables the administrator to control the flow of ip packets to and from isa server when packet filtering is enabled isa server drops all packets on the external interface unless they’re explicitly allowed statically by ip packet filters or dynamically by access policy or publishing rules ip packet filtering intercepts and evaluates packets before they’re passed to higher levels in the firewall engine or to an application filter you can configure ip packet filters so that only specified packets will be passed through isa server this practice provides a high level of security for the network ip packet filtering can block packets originating in specific internet hosts and can reject packets associated with many common attacks ip packet filtering can also block packets destined to any service on an internal network including the web proxy a web server an smtp server and others ip packets filters are static—communication through a given port is always either allowed or blocked allowfilters allow the traffic through unconditionally at the specified port blockfilters always prevent the packets from passing through the isa server computer isa server supports dynamic packet filtering opening ports automatically only as required for communications and closing the ports when the communication ends this approach minimizes the number of exposed ports in either direction and provides a high level of security for a network isa server supports inbound and outbound ip packet filtering isa server’s packet filtering also allows for blocking fragments and detecting packetlevel attacks against the firewall applicationlevel filtering the most sophisticated level of traffic inspection that the isa server firewall provides is the applicationlevel security “smart” application filters can analyze a data stream for a given application and provide applicationspecific processing including inspecting screening or blocking redirecting or even modifying the data as it passes through the firewall this mechanism protects against known exploits such as unsafe smtp commands or attacks against internal domain name system dns servers thirdparty tools for content screening including virus detection lexical analysis and site categorization also use application and web filters to further extend the firewall stateful inspection stateful inspection examines data crossing the firewall in the context of its protocol and the state of the connection at the packet level isa server inspects the source and destination of the traffic indicated in the ip header and the port in the tcp or udp header identifying the network service or application used dynamic packet filters enable the opening of a port only in response to a user’s request and only for the duration required to satisfy that request reducing the vulnerability associated with open ports isa server can determine dynamically which packets can be passed through to the internal network’s circuit and applicationlayer services administrators can configure accesspolicy rules that open ports automatically only as allowed and then close the ports when the communication ends this process known as dynamic packet filtering minimizes the number of exposed ports in either direction and provides a high level of problemfree security for the network integrated intrusion detection with the help of technology that a firm known as internet security systems provides isa server can help administrators identify and respond to common network attacks such as port scanning win nuke and ping of death this technology provides isa server with an integrated intrusiondetection mechanism that identifies these kinds of attacks the alert also specifies what action isa server should take when an attack is recognized action that might include sending an email message or a page to the systems administrator stopping the firewall service writing to the system event log or running any program or script with additional help from third parties isa server can help administrators identify and respond to other common network attacks highperformance web cache isa server has a completely redesigned web cache that enables it to place cache into ram this highperformance web cache provides greater scalability on the back end as well as a faster overall webclient response time cache array routing protocol isa server uses the cache array routing protocol carp to provide seamless scaling and high efficiency in an array of multiple isa server computers carp uses hashbased routing to provide a deterministic “request resolution path” through an array having a request resolution path which is based on a hashing of array member identities and urls means that for any given url request the browser or downstream proxy server can know exactly where the requested information is stored in the array chainedconfiguration cache placement in this context the term “chaining” refers to a hierarchical connection between individual isa server computers or arrays of isa server computers with chaining an isa server sends client requests upstream through the chain of cache servers until the requested object is found during this process each isa server caches the object as it is forwarded through each server to the client consequently chaining becomes an effective means of distributing server load and fault tolerance you can use the chained configuration to position content closer to users who need it resulting in faster webclient response times and reduced wide area network wan traffic isa server makes a distributed web cache possible in which users can obtain web pages from isa server rather than from individual web sites active caching with a feature known as active caching whereby you can configure isa server to automatically update objects in a cache isa server can optimize bandwidth utilization by proactively refreshing content with active caching isa server proactively updates objects that a client accesses frequently during periods of low network traffic active caching is a way to keep objects fresh in the cache by verifying them with the originating web server before the objects expire and a client accesses them the goal is to expedite those client accesses that would ordinarily require a roundtrip to the originating server to revalidate the data because there’s a cost associated with this in both proxy processing and network bandwidth the goal is to refresh only those objects that a client is likely to access in the future in contrast object “popularity” isn’t a useful criterion for this because many popular pages never expire this is due to the fact that clients refresh the pages manually to keep the data fresh in addition an object might be popular for only a short time the activecaching code tries to identify objects that follow precisely the pattern of accessed content that active refreshing would help—that is objects that expire and which a client then touches again unified management isa server takes advantage of the active directory service vpn and mmc all these capabilities especially mmc help to make administration easier because operations personnel are familiar with them and can manage both the firewall and web cache from one console using builtin reporting tools isa server supports the running of scheduled standard reports that detail web usage application usage networktraffic patterns and security isa server provides extensive support for reporting such matters as frequency of internet access what is being accessed and by whom by alerting and reporting such matters as outofboundary activity to administrators isa server can help them to better understand how employees are using the web this is helpful for capacity planning and enforcing corporate policies for example with modification to the ad schema and creation of policy administrators can configure isa server to run in an array arrays allow administrators to apply policy such as port configuration at the enterprise level thereby allowing them to apply a single change to every isa server within each array ad multimaster replication of isa server configuration ensures that each server in an array receives current and automatically updated configurations administrators must control and enforce security policies while simultaneously supporting employees who need internet access thanks to its integration with ad isa server provides comprehensive support for controlling access by user group application destination content type and schedule enterprise policy and access control isa server also supports the creation of enterpriselevel and local array policies for centralized or local enforcement you can install isa server as a standalone server or as an array member for easier management and administration array members share the same configuration when you modify the array configuration you also modify all the isa server computers in the array including all their access and cache policies centralized administration can also mean greater security administrators can configure a single server and apply that configuration to multiple isa servers an enterprise can take this centralized management one step further allowing administrators to implement one or more enterprise policies which include site and content rules and protocol rules administrators can apply an enterprise policy to any array and augment it with the array’s own policy this approach enforces enterprise policies at branch and departmental levels while allowing local administrators to further restrict access nortel networks alteon switched firewall one of microsoft’s internal networks uses alteon hardware firewalls and serves as an interesting study it contains a highspeed security network designed to support enterprisescale applications such as online transaction processing oltp and business intelligence bi nortel networks alteon switched firewalls asfs that are configured for high availability provide internal network security two separate asfs provide stateful failover and deep packet inspection of all connections passing through them the asfs provide 32 gigabytes of data throughput and 32000 sessions per second with 500000 concurrent sessions microsoft’s configuration consists of two alteon firewall accelerators and two alteon firewall directors environments with higher capacity requirements can expand this configuration up to twelve alteon firewall directors the asf plug and play pn p configuration features provide the ability to scale network security with zero downtime from an operational perspective the asf runs check point firewall1 next generation software much the same as any server running check point software procedures for monitoring security events handling security management and so on are the same what’s different is the scale and throughput of the firewalls the increased scale introduces some operational differences in how you manage the system including features unique to the characteristics of the asf and some features in the check point firewall1 next generation software that are not in other versions of check point firewall software these unique differences are outlined below firewall scale considerations the nortel networks asf has some unique capabilities notably dmz partitioning and pn p scaling that allow for both scaleup and scaleout of the firewall solution nortel networks provides training on such capabilities as part of the system installation process details on the operational considerations of managing asfs are provided later in this chapter large networks are typically very robust in design and effective management can be difficult nortel networks provides a single management solution for the asfs by using the check point software management suite when operating a large network the firewalls must scale to take advantage of the capacity of the server and application requirements the firewalls must be able to scale in bandwidth and you must maintain a very secure environment for the traffic within the data center while still providing access to external resources this does impose some requirements on the security administrator for example the firewalls need to support and scale the number of adddrop sessions per second and concurrent number of sessions while maintaining adequate throughput when running multiple firewalls whether multiple instances of the same firewall or a number of different firewalls working together the key requirement is that the firewalls not interfere with one another and maintain state between themselves for failover and failback purposes nortel networks provides a single image configuration for the alteon firewall cluster that provides the security administrator with the ability to perform upgrades and other administrative tasks on a single firewall while synchronization procedures populate the changes to the rest of the cluster alteon switched firewall considerations the alteon switched firewall contains a number of features such as multilink trunking and vlan tagging that affect certain design aspects of the network nortel networks provides installation support options that you can negotiate with a local nortel networks sales representative for more information visit httpwwwnortelnetworkscomindexhtml tools check point enterprise management client is the suite of management tools that you need to manage the asfs within the check point management software there are three main modules that deal with different operational aspects of the asf check point policy editor check point log viewer check point system status viewer these modules are described in the following sections check point policy editor the check point policy editor provides comprehensive management of the check point firewall engine that runs on the asfs the policy editor enables the security administrator to perform a wide range of functions including create delete and edit security policies on the asf cluster create delete define and edit objects protocols servers and users within the firewalls install and uninstall the security policies assigned to the asf clusters create delete and edit address translation rules from the asf clusters check point log viewer the log viewer provides administrators a visual representation of the traffic flow through the asfs security policies define which traffic to add to the log viewer so communications that don’t specify logging aren’t logged the log viewer is capable of displaying the following information for each communication date and time interface on which the traffic entered the action taken on the communication the rule number encryption and address translation details the log viewer has the ability to filter on each of the information categories above to focus on any element of the logs it has three modes log account and active the log mode shows each connection as it’s created the account mode shows information pertinent to accounting such as the duration of the connection and the number of bytes transferred the active mode lists all the connections currently open through the asf when the active mode is enabled the administrator can block any connection which can be very useful when policing the security domain check point system status viewer the system status viewer gives a graphical view of the working state of each firewall and provides information on how many packets have been accepted logged and dropped you can also use this tool to summarize the policy for a particular firewall in addition the system status viewer is the system monitoring interface that allows the generation of alerts under security administrator–defined conditions distributed enterprise management distributed enterprise management allows the asf administrator to configure and support multiple firewalls from one workstation the configuration of other activities is done through their respective guis and saved to a central management server the changes or actions applied to the required firewall are then downloaded from the management server which allows for scaleable management as the number of firewalls under the administrator’s control increases the management server holds a database that contains all the information needed to generate the required security policies object creation and management after the installation of the asfs and after the check point management software is complete the next step is to create and apply the rulebase of the security policy the security of the asf is centered on an objectoriented rulebase which you manage through the policy editor’s management menu and tool bars the utilities required to create and manage the different objects are in the following tools network objects manager services manager resources manager servers manager users manager time objects manager depending on the size of a network including subnets used range of services provided and number of resources and protocols you can save a significant amount of time by defining each element in the objects database when building the objects database you should adopt standards for object creation some standards to consider are the following naming convention color groups assigning a short intuitive name for an object can be a difficult task therefore when truncating a name to a maximum of 10 characters or symbols you should adopt a naming convention for example ws31owsewa wsweb server 31thirtyone owoutlook web access seseattle wawashingtonto many people the name ws31owsewa might seem meaningless but to the security administrators it would make sense the ability to assign a color to an individual object is a powerful administrative feature color can show certain characteristics of an object such as the department it belongs to or where it’s located consider the following color scheme red  firewalls green  internal protected objects yellow  external possibly harmful objects black  services operating the following sections describe some of the softwarespecific operations tasks that you can perform on the asf detailed documentation on how to perform these tasks is provided with the asf and asf training and is not replicated here configuration you can configure the asf as one or more “asf offerings” an asf offering is simply a set of hardware components you use together to create the asf you can run the entire asf as a single firewall or you can split the system into multiple dmz partitions each with its own copy of the set of rules and policies the nortel networks installation contract documented and provided to the customer covers all hardware configurations you can configure the policies objects and rules bases by using the check point management client software suite of tools maintenance the only periodic maintenance required on the asfs is replacement of the licenses for the check point firewall engines on the management station every 12 months depending on environmental conditions within the data center in the event of any hardware problems nortel networks provides maintenance under the terms of the applicable service and support agreement realtime monitoring the check point management software suite provides securitylog monitoring this feature provides policybased definition and event notification to monitor the security settings of the asfs and check point firewall1 software environment monitoring is continuous and in realtime to provide rapid notification of fault conditions and to ensure that all critical rules and policies are operating within defined limits system health monitoring provides a realtime view of the asf which allows the security administrator to check policy configuration and status information via a graphical user interface offers a consolidated view of the rules and objects in the asfs provides management wizards which enable an administrator to implement system changes across all j asfs without having to make modifications multiple times on multiple firewalls provides a security logs status page from which a security administrator can view a 24hour history of all the logs the asf has generated supporting incidents that affect a limited number of users might be indicative of larger problems that can affect the overall functionality of a network troubleshooting is an important part of incident prevention and problem management troubleshooting guidance is provided to help operations personnel understand various incidents and problems that might occur nortel networks provides support of the asf hardware under the terms of a service agreement there are various options depending on the needs of the data center capacity management whether you configure the firewall as one large dmz or multiple dmzs capacity management is important being an asicbased switch the asf can perform wire speed routing and intelligent decision making to provide the best performance for a given network nortel networks offers extensive performance analysis and capacity planning services to ensure clients obtain the optimum throughput from asfs for more information see httpwwwnortelnetworkscom there are several other vendors for hardware firewalls that deserve investigating among these are sonic wall nokia cisco watch guard net screen technologies lucent and nortel which all offer one or more models of hardware firewalls top of page summary of all the choices presented here the only one you can really go wrong with is choosing none of them don’t make the mistake of thinking that no one will attack your network because with the rise in automated attack tools your network is as much at risk as every other network on the internet unfortunately there’s a strong subculture that misaligns the bravado of a deep understanding of how networks and computer security works with digital breaking and entering because of the popularity and easeofuse of alwayson connections small office networks provide easy targets however by taking some simple precautions you can protect network and your data to take advantage of the networked world organizations must prevent unauthorized users from accessing their networks and at the same time ensure that authorized users have access only to authorized assets by providing advanced security technologies common management and lower cost through integrated solutions microsoft can enable businesses to take advantage of the network connectivity security is one of the most important features of a business site you can implement security at all levels network platform application and database you need to implement security technologies and tools that are costeffective and safe and that don’t adversely affect the performance of the site you must implement a dmz in your site and configure firewalls that prevent access to dangerous services network segregation data encryption and intrusion detection will provide further security for your network top of page