mapping class to a database view with entity framework entity type class here has no key defined you shall receive this kind of error if you map your class to a view if your class has no designated primary key one or more validation errors were detected during model generation system data edm edm entity type  entity type sales on each country has no key defined define the key for this entity type system data edm edm entity set entity type the entity set sales on each country list is based on type sales on each country that has no keys defined data source123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293create table country country id int identity 11 not null primary keycountry code varchar 4 not null uniquecountry name varchar 30 not null uniqueinsert into country country codecountry namevalues  ph philippines insert into country country codecountry namevalues  cn china insert into country country codecountry namevalues  jp japan create table city city id int identity 11 not null primary keycity code varchar 3 not null uniquecity name varchar 30 not null uniquecountry id int not null references country country idinsert into city city code city name country idvalues  mkt makati 1insert into city city code city name country idvalues  mnl manila 1insert into city city code city name country idvalues  bei beijing 2insert into city city code city name country idvalues  sha shanghai 2insert into city city code city name country idvalues  tky tokyo 3insert into city city code city name country idvalues  kyt kyoto 3create table sales or no int identity 11 not null primary keyor year int not nullcity id int not null references city city idor amount numeric 186 not nulldeclare i intset i  0while i  5 begininsert into sales or yearcity idor amount values 201012set i  i  1endset i  0while i  5 begininsert into sales or yearcity idor amount values 201022set i  i  1endset i  0while i  10 begininsert into sales or yearcity idor amount values 201112set i  i  1endset i  0while i  10 begininsert into sales or yearcity idor amount values 201122set i  i  1endcreate view sales on each country  with schema bindingasselect x country id x country name s or yearcountbig  as sales count sum s or amount as total salesfrom dbo sales sjoin dbo city c on c city id  s city idjoin dbo country x on c country id  x country idgroup by x country id s or yearx country name  ancillary field s create unique clustered index uxsales on each country on sales on each country country id or yearancillary fields on group byselect  from sales on each country country id country name or year sales count total sales      1 philippines 2010 10 20000000 1 philippines 2011 20 40000000 2 row s affectedyou must put a primary key on your class howevery if you just put the primary key on country id for the following mapping123456789public class sales on each country  keypublic int country id  get set public string country name  get set public int or year  get set public long sales count  get set public decimal total sales  get set  even theres no runtime error for this code1234foreach sales on each country s in db sales on each country list console write line   0 1 2 s country name s or year s total salesentity framework will still function normally and produces this incorrect output philippines 2010 20000000 philippines 2010 20000000you must put the unique combination on country and year remove the key attribute on sales on each country class and move it on on model creating1234567protected override void on model creating db model builder model builder base  on model creating model buildermodel builder conventions removepluralizing table name convention model builder entitysales on each country  has key x  new  x country id x or year now that will produce correct result philippines 2010 20000000 philippines 2011 40000000another point though you can opt to use attribute approach on designating composite primary key on the class itself the intent of composite key is more clear and intuitive if it is placed on on model creating as for those who preferred to indicate composite primary key by using attributes heres how it is done remove first the has key code from on model creating123456789public class sales on each country  key column order0 public int country id  get set public string country name  get set  key column order1 public int or year  get set public long sales count  get set public decimal total sales  get set posted by ienable much at 956 pm email this blog this share to twitter share to facebook share to pinterest labels entity framework  orm 